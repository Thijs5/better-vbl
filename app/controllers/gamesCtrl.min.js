angular.module("better-vbl").controller("gamesCtrl",["$scope","$stateParams","vblDataService",function(a,e,t){function n(){t.matchesByTeam(a.team.guid).then(r,i)}function r(e){a.isLoadingData=!0,a.team.name=e.data[0].naam,a.team.games=e.data[0].wedstrijden,a.team.poule=e.data[0].poules[0].naam,console.log(e)}function i(e){a.isLoadingData=!0,console.error(e)}function o(a){var e=a.split("-"),t=e[0],n=e[1],r=e[2],i=new Date(r,n-1,t);return m(i).substr(0,2)+" "+t+" "+d(i)}function m(a){var e=a.getDay(),t=["maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag","zondag"];return t[e]}function d(a){var e=a.getMonth(),t=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];return t[e]}function s(){for(var e=ics(),t=0;t<a.team.games.length;t++){var n=a.team.games[t],r=n.teamThuisNaam+" vs "+n.teamUitNaam,i="",o=n.accommOmschr,m=n.datumString.split("-"),d=n.beginTijd.split("."),s=new Date(m[2],parseInt(m[1])-1,m[0],d[0],d[1],0,0),g=u(s,2);e.addEvent(r,i,o,s,g)}window.open("data:text/calendar;charset=utf8,"+escape(e.calendar()))}function u(a,e){var t=new Date(a.getTime());return t.setTime(t.getTime()+60*e*60*1e3),t}a.team={guid:e.teamGuid},a.isLoadingData=!1,n(),a.printDate=o,a.getDayNl=m,a.getMonthNl=d,a.downloadCalendar=s}]);