angular.module("better-vbl").controller("gamesCtrl",["$scope","$stateParams","vblDataService",function(a,e,t){function n(){t.matchesByTeam(a.team.guid).then(r,i)}function r(e){a.isLoadingData=!0,a.team.name=e.data[0].naam,a.team.games=e.data[0].wedstrijden,a.team.poule=e.data[0].poules[0].naam,console.log(a.team)}function i(e){a.isLoadingData=!0,console.error(e)}function m(a){var e=a.split("-"),t=e[0],n=e[1],r=e[2],i=new Date(r,n-1,t);return d(i).substr(0,2)+" "+t+" "+s(i)}function o(a){return a.substr(0,a.length-6)}function d(a){var e=a.getDay(),t=["maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag","zondag"];return t[e]}function s(a){var e=a.getMonth(),t=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];return t[e]}function u(){for(var e=ics(),t=0;t<a.team.games.length;t++){var n=a.team.games[t],r=n.teamThuisNaam+" vs "+n.teamUitNaam,i="",m=n.accommOmschr,o=n.datumString.split("-"),d=n.beginTijd.split("."),s=new Date(o[2],parseInt(o[1])-1,o[0],d[0],d[1],0,0),u=g(s,2);e.addEvent(r,i,m,s,u)}window.open("data:text/calendar;charset=utf8,"+escape(e.calendar()))}function g(a,e){var t=new Date(a.getTime());return t.setTime(t.getTime()+60*e*60*1e3),t}a.team={guid:e.teamGuid},a.isLoadingData=!1,n(),a.printDate=m,a.trimmedTeamName=o,a.getDayNl=d,a.getMonthNl=s,a.downloadCalendar=u}]);